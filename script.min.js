"#popout"===window.location.hash&&($(".popout-hidden").h(),$(".intro").i("CCIM"),$("#message").b("height","45%"),$("#text").b("height","auto"));$("#logout").click(function(){(new Firebase("https://ccim2.firebaseio.com")).o();localStorage.setItem("auth","false");window.location.href="/logout.html"});$(document).ready(function(){$("#message").scrollTop($("#message")[0].scrollHeight)});e();$("#help").click(function(){$("#myModal").l("show")});function e(){var b=Math.floor(50*Math.random()+1);$("body").b("background-image",'url("http://im.clubcoder.tk/backgrounds/'+b+'.jpg")').g(3E5,function(){setTimeout(e,3E5)});$("#view-image").f("href","http://im.clubcoder.tk/backgrounds/"+b+".jpg")}var f=new Firebase("https://ccim2.firebaseio.com/messages/");jQuery(document).ready(g);function h(){var b=new Date,a=new Date,c=new Date,d=new Date;if(12<d.getHours())var d=d.getHours()-12,k=" P.M.";else d=d.getHours(),k=" A.M.";return a.getMonth()+1+"/"+c.getDate()+"/"+b.getFullYear()+"  "+d+":07"+k+" "}function g(){$("#message").scrollTop($("#message")[0].scrollHeight);jQuery("#submit").click(l);$("#popout").click(m);f.m("child_added",n)}function p(b,a,c){return b.replace(new RegExp(a,"g"),c)}function m(){window.open("/#popout","test","status=no,location=no,toolbar=no,menubar=no,width=300,height=500")}function n(b){var a;a=jQuery("#message");b=b.a();if(0===b.indexOf("/")){console.log("private:"+b);var c=b.substring(1,b.indexOf("/header/")),d=b.substring(b.indexOf("/end/")+5);console.log("command: "+c+" other: "+b.substring(b.indexOf("/header/")+8,b.indexOf("/end/"))+" note: "+d);"after"===c?$("#message").scrollTop($("#message")[0].scrollHeight):"private"===c&&-1<d.indexOf(localStorage.getItem("username"))&&(a.append("<p>"+d+"</p>"),$("#autoscroll").c("checked")&&$("#message").scrollTop($("#message")[0].scrollHeight))}else a.append("<p>"+b+"</p>"),$("#autoscroll").c("checked")&&$("#message").scrollTop($("#message")[0].scrollHeight)}$("textarea").j(function(b){function a(a){if(a.selectionStart)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange();if(null==b)return 0;a=a.createTextRange();var c=a.duplicate();a.moveToBookmark(b.getBookmark());c.setEndPoint("EndToStart",a);return c.text.length}return 0}if(13==b.keyCode){var c=this.value,d=a(this);b.shiftKey?(this.value=c.substring(0,d-1)+"\n"+c.substring(d,c.length),b.stopPropagation()):(this.value=c.substring(0,d-1)+c.substring(d,c.length),l())}});function l(){var b=localStorage.getItem("username"),a;a=jQuery("#text");a=p(p(convertToHtml(p(p(a.a(),"<","&lt;"),">","&gt;")),"<p>"," "),"</p>"," ");if(0===a.indexOf("/")){console.log(3);var b=localStorage.getItem("username"),c=a.substring(a.indexOf("/")+1,a.indexOf("["));console.log(c);console.log(2);"msg"===c&&(c=a.substring(a.indexOf("/msg[")+5,a.indexOf("]")),a=a.substring(a.indexOf("] ")+2),a="/private/header/"+c+"/end/"+h()+b+" sent a private message to: "+p(p(p(p(p(c," "," and ")," i"," I")," j"," J")," d","D")," l"," L")+": "+a,f.push(a),$("#text").a(""),console.log(4));console.log(10);console.log(4);$("#text").a("")}else null!==a&&""!==a&&" "!==a&&"\n"!==a&&(topush=h()+b+": "+a,f.push(topush),$("#text").a(""))};